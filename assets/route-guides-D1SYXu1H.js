import{j as e,M as t}from"./vendor-markdown-Bjd2cn-1.js";import{r,a as s,g as n,R as i}from"./vendor-react-BbiizXEL.js";import{g as a}from"./data-guides-e6CimqWF.js";const o=(e,t)=>{const[s,n]=r.useState(()=>{if("undefined"==typeof window)return t;const r=window.localStorage.getItem(e);if(!r)return t;try{return JSON.parse(r)}catch(s){return r}});return r.useEffect(()=>{const t=t=>{if(t.key===e&&null!==t.newValue)try{n(JSON.parse(t.newValue))}catch(r){n(t.newValue)}};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[e]),[s,t=>{try{const r=t instanceof Function?t(s):t;n(r),"undefined"!=typeof window&&window.localStorage.setItem(e,JSON.stringify(r))}catch(r){r.name}}]},d=r.createContext(),l=({children:t})=>{const[s,n]=o("theme","dark");r.useEffect(()=>{const e=document.documentElement;"dark"===s?e.removeAttribute("data-theme"):e.setAttribute("data-theme","light")},[s]);return e.jsx(d.Provider,{value:{theme:s,toggleTheme:()=>{n(e=>"dark"===e?"light":"dark")}},children:t})},c=()=>{const e=r.useContext(d);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},u=r.createContext(null),m=()=>{const e=r.useContext(u);return e||{success:()=>{},error:()=>{},info:()=>{},warning:()=>{}}},g={success:{icon:"‚úì",bg:"linear-gradient(135deg, rgba(34, 197, 94, 0.95), rgba(22, 163, 74, 0.95))",border:"rgba(34, 197, 94, 0.4)"},error:{icon:"‚úï",bg:"linear-gradient(135deg, rgba(239, 68, 68, 0.95), rgba(220, 38, 38, 0.95))",border:"rgba(239, 68, 68, 0.4)"},info:{icon:"‚Ñπ",bg:"linear-gradient(135deg, rgba(59, 130, 246, 0.95), rgba(37, 99, 235, 0.95))",border:"rgba(59, 130, 246, 0.4)"},warning:{icon:"‚ö†",bg:"linear-gradient(135deg, rgba(245, 158, 11, 0.95), rgba(217, 119, 6, 0.95))",border:"rgba(245, 158, 11, 0.4)"}},p=({id:t,type:r,message:s,onDismiss:n,isExiting:i})=>{const a=g[r]||g.info;return e.jsxs("div",{role:"alert","aria-live":"polite",style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 20px",borderRadius:"14px",background:a.bg,border:`1px solid ${a.border}`,boxShadow:"0 10px 40px rgba(0, 0, 0, 0.4), 0 0 20px rgba(0, 0, 0, 0.2)",color:"#fff",fontSize:"0.9rem",fontWeight:500,maxWidth:"380px",backdropFilter:"blur(10px)",animation:i?"toastSlideOut 0.3s ease-in forwards":"toastSlideIn 0.3s ease-out"},children:[e.jsx("span",{style:{width:"26px",height:"26px",borderRadius:"50%",background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem",fontWeight:700,flexShrink:0},children:a.icon}),e.jsx("span",{style:{flex:1,lineHeight:1.4},children:s}),e.jsx("button",{onClick:()=>n(t),"aria-label":"Dismiss",style:{background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"6px",padding:"6px 10px",color:"#fff",cursor:"pointer",fontSize:"1.1rem",lineHeight:1,transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="rgba(255,255,255,0.25)",onMouseLeave:e=>e.currentTarget.style.background="rgba(255,255,255,0.15)",children:"√ó"})]})},h=({children:t})=>{const[n,i]=r.useState([]),a=r.useCallback((e,t,r=3500)=>{const s=Date.now()+Math.random();return i(r=>[...r,{id:s,type:e,message:t,isExiting:!1}]),navigator.vibrate&&"success"===e&&navigator.vibrate(50),r>0&&setTimeout(()=>{i(e=>e.map(e=>e.id===s?{...e,isExiting:!0}:e)),setTimeout(()=>{i(e=>e.filter(e=>e.id!==s))},300)},r),s},[]),o=r.useCallback(e=>{i(t=>t.map(t=>t.id===e?{...t,isExiting:!0}:t)),setTimeout(()=>{i(t=>t.filter(t=>t.id!==e))},300)},[]),d={success:(e,t)=>a("success",e,t),error:(e,t)=>a("error",e,t),info:(e,t)=>a("info",e,t),warning:(e,t)=>a("warning",e,t),dismiss:o};return e.jsxs(u.Provider,{value:d,children:[t,"undefined"!=typeof document&&s.createPortal(e.jsxs("div",{style:{position:"fixed",bottom:"24px",right:"24px",zIndex:1e4,display:"flex",flexDirection:"column-reverse",gap:"10px",pointerEvents:"none"},children:[n.map(t=>e.jsx("div",{style:{pointerEvents:"auto"},children:e.jsx(p,{...t,onDismiss:o})},t.id)),e.jsx("style",{children:'\n                        @keyframes toastSlideIn {\n                            from { opacity: 0; transform: translateX(100%) scale(0.8); }\n                            to { opacity: 1; transform: translateX(0) scale(1); }\n                        }\n                        @keyframes toastSlideOut {\n                            from { opacity: 1; transform: translateX(0) scale(1); }\n                            to { opacity: 0; transform: translateX(100%) scale(0.8); }\n                        }\n                        @media (max-width: 480px) {\n                            [style*="position: fixed"][style*="bottom: 24px"] {\n                                left: 12px !important;\n                                right: 12px !important;\n                                bottom: 80px !important;\n                            }\n                        }\n                    '})]}),document.body)]})},f=r.createContext(),x=()=>{const e=r.useContext(f);if(!e)throw new Error("useFavorites must be used within a FavoritesProvider");return e},v=({children:t})=>{const s=m(),[n,i]=o("favoriteCards",[]),[a,d]=o("favoriteVouchers",[]),[l,c]=o("favoriteGuides",[]),u=r.useRef("undefined"!=typeof window&&"true"===localStorage.getItem("hasShownFirstFavorite")),g=r.useCallback(()=>{u.current||(u.current=!0,localStorage.setItem("hasShownFirstFavorite","true"),setTimeout(()=>{s.info("üéâ Your first favorite! Find all your favorites in the ‚ù§Ô∏è menu.",5e3)},500))},[s]),p=r.useCallback((e,t="Card")=>{const r=String(e);i(e=>{const n=e.includes(r),i=n?e.filter(e=>e!==r):[...e,r];return navigator.vibrate&&navigator.vibrate(n?30:[30,50,30]),n?s.info(`${t} removed from favorites`):(s.success(`${t} added to favorites!`),0===e.length&&0===a.length&&g()),i})},[s,i,a.length,g]),h=r.useCallback((e,t="Voucher")=>{const r=String(e);d(e=>{const i=e.includes(r),a=i?e.filter(e=>e!==r):[...e,r];return navigator.vibrate&&navigator.vibrate(i?30:[30,50,30]),i?s.info(`${t} removed from favorites`):(s.success(`${t} added to favorites!`),0===e.length&&0===n.length&&g()),a})},[s,d,n.length,g]),x=r.useCallback((e,t="Guide")=>{c(r=>{const n=r.includes(e),i=n?r.filter(t=>t!==e):[...r,e];return n?s.info(`${t} removed from saved guides`):s.success(`${t} saved!`),i})},[s,c]),v=r.useCallback(e=>n.includes(String(e)),[n]),b=r.useCallback(e=>a.includes(String(e)),[a]),y=r.useCallback(e=>l.includes(e),[l]),j=r.useCallback(()=>{const e=n.length+a.length+l.length;if(0===e)return void s.info("No favorites to clear");const t={cards:[...n],vouchers:[...a],guides:[...l]};i([]),d([]),c([]),s.warning(`Cleared ${e} favorites`),sessionStorage.setItem("favoritesBackup",JSON.stringify(t))},[s,n,a,l,i,d,c]),w=r.useCallback(()=>{try{const e=JSON.parse(sessionStorage.getItem("favoritesBackup"));e&&(i(e.cards||[]),d(e.vouchers||[]),c(e.guides||[]),s.success("Favorites restored!"),sessionStorage.removeItem("favoritesBackup"))}catch(e){s.error("Could not restore favorites")}},[s,i,d,c]);return e.jsx(f.Provider,{value:{favoriteCards:n,favoriteVouchers:a,favoriteGuides:l,toggleFavoriteCard:p,toggleFavoriteVoucher:h,toggleFavoriteGuide:x,isCardFavorite:v,isVoucherFavorite:b,isGuideFavorite:y,clearAllFavorites:j,restoreFavorites:w,totalFavorites:n.length+a.length+l.length},children:t})};var b,y,j,w,k,C={exports:{}};function S(){if(y)return b;y=1;return b="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function N(){if(w)return j;w=1;var e=S();function t(){}function r(){}return r.resetWarningCache=t,j=function(){function s(t,r,s,n,i,a){if(a!==e){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function n(){return s}s.isRequired=s;var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:n,element:s,elementType:s,instanceOf:n,node:s,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i}}function E(){return k||(k=1,C.exports=N()()),C.exports}const T=n(E()),L=(e={})=>{const{enabled:t=!0}=e,[s,n]=r.useState([]),[i,o]=r.useState(!0),[d,l]=r.useState(null);return r.useEffect(()=>{if(!t)return void o(!1);(async()=>{n(a),o(!1)})()},[t]),{guides:s,loading:i,error:d}},I=({size:t="md",color:r="var(--accent-cyan)",text:s})=>{const n={sm:"24px",md:"40px",lg:"60px"},i=n[t]||n.md;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1rem",padding:"2rem"},role:"status","aria-live":"polite","aria-busy":"true",children:[e.jsx("div",{className:"loading-spinner",style:{width:i,height:i,border:"3px solid rgba(255, 255, 255, 0.1)",borderTop:`3px solid ${r}`,borderRadius:"50%",animation:"spin 1s linear infinite"},"aria-hidden":"true"}),s&&e.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.875rem",margin:0},children:s}),e.jsx("span",{className:"sr-only",children:"Loading..."})]})};I.propTypes={size:T.oneOf(["sm","md","lg"]),color:T.string,text:T.string};const F=({embedHtml:t,theme:s,onLoad:n})=>{const a=i.useRef(null),[o,d]=r.useState(!1);return r.useEffect(()=>{if(!a.current||!t)return;const e=t.replace(/<script\b[^>]*>([\s\S]*?)<\/script>/gim,"");a.current.innerHTML=e;const r=a.current.querySelector("blockquote");r&&("dark"===s?r.setAttribute("data-embed-theme","dark"):r.removeAttribute("data-embed-theme"));const i="reddit-wjs";let o=document.getElementById(i);o&&o.remove(),o=document.createElement("script"),o.id=i,o.src="https://embed.reddit.com/widgets.js",o.async=!0,o.charset="UTF-8",document.body.appendChild(o);const l=setInterval(()=>{if(a.current){const e=a.current.querySelector("iframe");e&&e.offsetHeight>0&&(d(!0),n&&n(),clearInterval(l))}},100),c=setTimeout(()=>{clearInterval(l),d(!0),n&&n()},8e3);return()=>{clearInterval(l),clearTimeout(c)}},[t,s,n]),e.jsxs("div",{style:{position:"relative",minHeight:o?"0":"300px"},children:[!o&&e.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"var(--modal-bg)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1rem",zIndex:10,borderRadius:"12px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Loading discussion..."})]}),e.jsx("div",{ref:a})]})},O=({guide:s,onClose:n})=>{const{theme:i}=c(),a=r.useMemo(()=>s.embedHtml?s.embedHtml.includes("twitter-tweet")&&!s.embedHtml.includes("data-theme=")?s.embedHtml.replace(/class=["']twitter-tweet["']/,`class="twitter-tweet" data-theme="${i}"`):s.embedHtml:"",[s.embedHtml,i]);r.useEffect(()=>(window.twttr&&window.twttr.widgets&&window.twttr.widgets.load(),document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[s,i]),r.useEffect(()=>{const e=e=>{"Escape"===e.key&&n()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n]);return e.jsx("div",{className:"guide-modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"2rem 1rem",overflowY:"auto"},onClick:n,children:e.jsxs("div",{className:"guide-modal-container",style:{background:"var(--modal-bg)",border:"1px solid var(--modal-border)",borderRadius:"20px",width:"100%",maxWidth:"700px",margin:"auto",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",position:"relative"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"guide-modal-header-wrapper",children:[e.jsx("h3",{className:"guide-modal-title",children:s.title}),e.jsx("button",{className:"guide-modal-close-btn",onClick:n,children:"√ó"})]}),s.content?e.jsx("div",{style:{color:"var(--text-primary)",lineHeight:"1.6",width:"100%"},children:e.jsx(t,{components:{h1:({...t})=>e.jsx("h1",{style:{fontSize:"1.8rem",margin:"1.5rem 0 1rem"},...t}),h2:({...t})=>e.jsx("h2",{style:{fontSize:"1.5rem",margin:"1.5rem 0 1rem",color:"var(--accent-cyan)"},...t}),h3:({...t})=>e.jsx("h3",{style:{fontSize:"1.2rem",margin:"1.2rem 0 0.8rem"},...t}),p:({...t})=>e.jsx("p",{style:{marginBottom:"1rem"},...t}),ul:({...t})=>e.jsx("ul",{style:{marginBottom:"1rem",paddingLeft:"1.5rem"},...t}),li:({...t})=>e.jsx("li",{style:{marginBottom:"0.5rem"},...t}),blockquote:({...t})=>e.jsx("blockquote",{style:{borderLeft:"4px solid var(--accent-cyan)",margin:"1rem 0",paddingLeft:"1rem",color:"var(--text-secondary)",fontStyle:"italic"},...t}),a:({...t})=>e.jsx("a",{style:{color:"var(--accent-cyan)"},...t})},children:s.content})}):s.embedHtml&&s.embedHtml.includes('blockquote class="reddit-embed-bq"')?e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx(F,{embedHtml:s.embedHtml,theme:i})}):e.jsx("div",{className:"guide-embed-wrapper",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a}})}),s.link&&"#"!==s.link&&e.jsx("div",{style:{marginTop:"2rem",display:"flex",justifyContent:"center"},children:e.jsxs("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"btn-primary",style:{fontSize:"0.9rem",textDecoration:"none"},children:[s.link.includes("reddit.com")?"Open on Reddit":s.link.includes("twitter.com")||s.link.includes("x.com")?"Open on Twitter":"Open Link"," ‚Üó"]})})]})})},H=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{guides:t,loading:s,error:n}=L(),[i,a]=r.useState(null),[o,d]=r.useState(null),[l,c]=r.useState(""),[u,m]=r.useState(9),{toggleFavoriteGuide:g,isGuideFavorite:p}=x(),[h,f]=r.useState(!1),v=r.useRef(null),b=r.useMemo(()=>{if(!t)return[];const e=new Set;return t.forEach(t=>{t.tags&&t.tags.forEach(t=>e.add(t))}),Array.from(e).sort()},[t]),y=r.useMemo(()=>{if(!t)return[];let e=[...t];if(o&&(e=e.filter(e=>e.tags&&e.tags.includes(o))),l.trim()){const t=l.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(t))||e.author&&e.author.toLowerCase().includes(t))}return e},[t,o,l]),j=r.useMemo(()=>y.slice(0,u),[y,u]);return r.useEffect(()=>{if(!document.getElementById("twitter-wjs")){const e=document.createElement("script");e.id="twitter-wjs",e.src="https://platform.twitter.com/widgets.js",e.async=!0,e.charset="utf-8",document.body.appendChild(e)}const e=e=>{v.current&&!v.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),s?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:e.jsx(I,{size:"lg"})}):n?e.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:"var(--text-danger)"},children:[e.jsx("h3",{children:"Error loading guides"}),e.jsx("p",{children:"Please try again later."})]}):e.jsxs("div",{className:"guides-container",children:[e.jsxs("header",{className:"guides-header",children:[e.jsx("h2",{className:"guides-title",children:"Community Guides"}),e.jsx("p",{className:"guides-subtitle",children:"Curated discussions and threads to help you maximize savings."})]}),e.jsxs("div",{className:"guides-control-bar",children:[e.jsxs("div",{className:"guides-search-wrapper",children:[e.jsx("div",{className:"guides-search-icon",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),e.jsx("input",{type:"text",className:"guides-search-input",placeholder:"Search guides, authors, topics...",value:l,onChange:e=>{c(e.target.value),m(9)}})]}),e.jsx("div",{className:"guides-divider"}),e.jsxs("div",{style:{position:"relative"},ref:v,children:[e.jsxs("button",{className:`guides-filter-trigger ${h?"open":""} ${o?"has-selection":""}`,onClick:()=>f(!h),children:[e.jsx("span",{children:o||"Filter by Category"}),o&&e.jsx("span",{onClick:e=>{e.stopPropagation(),d(null),m(9)},style:{background:"rgba(255,255,255,0.2)",borderRadius:"50%",width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.6rem",marginLeft:"4px"},children:"‚úï"}),!o&&e.jsx("span",{className:"arrow",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),e.jsxs("div",{className:"guides-dropdown-menu "+(h?"open":""),children:[e.jsxs("div",{className:"guides-dropdown-item "+(o?"":"selected"),onClick:()=>{d(null),m(9),f(!1)},children:[e.jsx("span",{children:"All Categories"}),e.jsx("span",{className:"guides-filter-count",children:t?.length})]}),b.map(r=>e.jsxs("div",{className:"guides-dropdown-item "+(o===r?"selected":""),onClick:()=>{d(r),m(9),f(!1)},children:[e.jsx("span",{children:r}),e.jsx("span",{className:"guides-filter-count",children:t.filter(e=>e.tags&&e.tags.includes(r)).length})]},r))]})]})]}),e.jsx("div",{className:"guides-grid",children:j.map(t=>{const r=!!t.embedHtml,s=!!t.content,n=r||s;return e.jsx("div",{className:"guide-card glass-panel",onClick:()=>{n?a(t):window.open(t.link,"_blank")},children:e.jsxs("div",{className:"guide-card-content",children:[e.jsxs("div",{className:"guide-card-header",children:[e.jsxs("div",{className:"guide-tags-wrapper",children:[t.tags.slice(0,2).map(t=>e.jsx("span",{className:"guide-tag-pill",children:t},t)),t.tags.length>2&&e.jsxs("span",{className:"guide-tag-pill",children:["+",t.tags.length-2]})]}),e.jsx("button",{className:"guide-fav-btn",onClick:e=>{e.stopPropagation(),g(t.id)},title:p(t.id)?"Remove from favorites":"Add to favorites",style:{color:p(t.id)?"#ef4444":"var(--text-secondary)"},children:p(t.id)?"‚ù§Ô∏è":"ü§ç"})]}),e.jsx("h3",{className:"guide-card-title",children:t.title}),e.jsx("p",{className:"guide-card-description",children:t.description}),e.jsxs("div",{className:"guide-card-footer",children:[e.jsx("span",{className:"guide-author",children:t.author}),n?e.jsx("button",{className:"guide-action-btn",children:s?"Read Guide":"Read Thread"}):e.jsx("span",{className:"guide-action-btn",style:{border:"none",background:"transparent",padding:"0"},children:"Visit Link ‚Üó"})]})]})},t.id)})}),u<y.length&&e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"3rem"},children:e.jsx("button",{className:"guide-load-more-btn",onClick:()=>m(e=>e+9),children:"Load More Guides"})}),0===y.length&&e.jsx("div",{style:{textAlign:"center",padding:"4rem",color:"var(--text-secondary)"},children:"No guides found matching your filters."}),i&&e.jsx(O,{guide:i,onClose:()=>a(null)})]})}},Symbol.toStringTag,{value:"Module"}));export{v as F,H as G,I as L,T as P,l as T,x as a,c as b,L as c,o as d,h as e,m as u};
