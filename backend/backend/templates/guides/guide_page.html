{% extends "guides/guide_base.html" %}

{% load wagtailcore_tags %}

{% block title %}{{ page.title }} | Voucher Tracker{% endblock %}
{% block content %}
  <article class="glass-panel" style="padding: 2.5rem;">
    <!-- Header Section -->
    <header style="margin-bottom: 2rem;">
      <h1>{{ page.title }}</h1>
      <div class="metadata">
        {% if page.author %}
          <span class="author">By {{ page.author }}</span>
          <span>•</span>
        {% endif %}
        <span class="date">{{ page.last_published_at|date:"F j, Y" }}</span>
      </div>
      {% if page.tags.all %}
        <div style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem;">
          {% for tag in page.tags.all %}<span class="tag-pill">#{{ tag }}</span>{% endfor %}
        </div>
      {% endif %}
      {% if page.intro %}<div class="intro">{{ page.intro }}</div>{% endif %}
      {% if page.external_link %}
        <div style="margin-bottom: 2rem;">
          <a href="{{ page.external_link }}"
             target="_blank"
             class="glass-panel"
             style="display: inline-block;
                    padding: 0.8rem 1.5rem;
                    border: 1px solid var(--accent-cyan);
                    color: var(--accent-cyan);
                    font-weight: 500">Visit External Discussion ↗</a>
        </div>
      {% endif %}
    </header>
    <!-- Main Content -->
    <div class="content-wrapper">
      {% for block in page.body %}
        {% if block.block_type == 'heading' %}
          <h2>{{ block.value }}</h2>
        {% elif block.block_type == 'paragraph' %}
          {{ block.value|richtext }}
        {% elif block.block_type == 'embed' %}
          <div class="block-embed"
               style="margin: 2rem 0;
                      display: flex;
                      justify-content: center">{{ block.value|safe }}</div>
        {% endif %}
      {% endfor %}
    </div>
  </article>
  <!-- Twitter Widgets Script for Embeds if needed -->
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
{% endblock %}
